pipeline{
    agent any
    environment { 
        registry = "jasmine992/chat-application" 
        registryCredential = 'jasmineharit' 
        dockerImage = '' 
    }    
    tools { 
        nodejs 'node'
    }
    stages
       {
           stage("Install node modules")
           {
             steps
             {
               sh 'npm install'
             }
           }
       }
           stage("Build Image")
               steps {
                   script {
                       dockerImage = docker.build registry + ":$GIT_COMMIT-$BUILD_NUMBER"
                   }
                }
       }
