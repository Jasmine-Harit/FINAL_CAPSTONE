pipeline {
  environment {
    registry = "jasmine-harit-maker/FINAL_CAPSTONE"
    registryCredential = 'jasmine-harit-maker'
    dockerImage = ''
  }
  agent any
  
  
  stages {
   
     stage('Install Dependencies') { 
        steps { 
           sh 'npm install' 
           sh 'npm run client-install'
        }
     }
   
    stage('Build') {
    steps {
       sh 'npm run dev'
       sh 'rm -rf node_module/'
       sh 'rm -rf client/node_modules' 
     }
  }

//     stage('Build Docker') {
//        steps {
//          sh 'docker build -t jasmine-harit-maker/FINAL_CAPSTONE:$BUILD_NUMBER .'
//        }
//     }
 
//     stage('Deploy Image') {
//       steps{
//          sh '''
//             docker.withRegistry( '', registryCredential ) 
//             docker push jasmine-harit-maker/FINAL_CAPSTONE:$BUILD_NUMBER 
//             '''
            
//       }}
      }
    }
