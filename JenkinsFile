pipeline{
    agent any
    environment { 
        registry = "jasmine992/final-capstone" 
        registryCredential = 'jasmine992' 
        dockerImage = '' 
    }    
    stages {
      stage('Git') {
        steps {
          git 'https://github.com/jasmine-harit-maker/FINAL_CAPSTONE.git'
      }
    }
      stage('Build') {
        steps {
          sh 'npm install'
        }
      }  
      stage('Building Image') {
        steps {
          script {
            dockerImage = docker.build registry + ":$BUILD_NUMBER"
          }
        }  
      }
      stage('Test') {
        steps {
          sh 'npm test'
      }
    }
  }
}
